#include<iostream>
#include<string.h>
using namespace std;
int ans=0,a[10],n;
void dfs(int x)
{
	int i;
	if(x==n)
	{
		ans++;
		return;
	}
	if(a[x]==0)
	{
		for(i=1;i<=n;i++)
		{
			a[x]=i;
			dfs(x);
			a[x]=0;
		}
	}
	else 
	{
		if(x==0)dfs(x+1);
		else
		{
			if(a[x]==a[x-1]+1||a[x]==a[x-1]||a[x]==a[x-1]-1)dfs(x+1);
			else return;
		 } 
	}
 } 
int main()
{
	int i;
	while(1)
	{
		ans=0;
		cin>>n;
		if(n==0)break;
		for(i=0;i<n;i++)cin>>a[i];
		dfs(0);
		cout<<ans<<endl;
	}
	return 0;
}
